// Analysis Modal Overlay
.analysis-modal-overlay {
  @include modal-overlay($bg: $overlay-60, $blur: 4px, $z: $z-modal);
  padding: 1rem;
}

// Analysis Modal
.analysis-modal {
  @include modal-panel($radius: $radius-2xl, $shadow: $shadow-float);
  max-width: 600px;
  width: 90vw;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  animation: vr-slide-in-scale 0.3s ease-out;
  overflow: hidden;
}

// Header
.analysis-header {
  @include panel-header($background: $gradient-brand, $padding: 1.5rem, $radius-top: $radius-2xl);

  h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .close-btn {
    @include close-button-inverse($size: 2rem, $font-size: 1.75rem, $radius: $radius-md);
  }
}

// Body
.analysis-body {
  padding: 2rem;
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;

  @include scrollbars($size: 6px, $track: #f1f1f1, $thumb: #cbd5e0, $thumb-hover: #a0aec0);
}

// Progress Container
.progress-container {
  text-align: center;

  .progress-bar {
    width: 100%;
    height: 8px;
    background: $color-border;
    border-radius: $radius-sm;
    overflow: hidden;
    position: relative;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
    background-size: 200% 100%;
    animation: vr-progress-pulse 2s ease-in-out infinite;
    border-radius: $radius-sm;
    width: 100%;
  }

  .progress-text {
    margin-top: 0.75rem;
    font-size: 0.9rem;
    color: $color-text-muted;
    font-weight: 500;
  }
}

// Stats Grid
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
}

.stat-card {
  background: $color-bg;
  border-radius: $radius-xl;
  padding: 1.25rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  transition: transform $transition, box-shadow $transition;

  @include lift-hover($shadow: 0 4px 12px rgba(0, 0, 0, 0.1));

  .stat-icon {
    font-size: 2rem;
    line-height: 1;
  }

  .stat-content {
    flex: 1;
    min-width: 0;
  }

  .stat-label {
    font-size: 0.75rem;
    color: $color-text-muted;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.25rem;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: $color-text;
    animation: vr-count-up 0.3s ease-out;
  }
}

// File Types Section
.file-types-section {
  background: $color-bg;
  border-radius: $radius-xl;
  padding: 1.5rem;

  h3 {
    font-size: 1rem;
    font-weight: 600;
    color: $color-text;
    margin: 0 0 1rem 0;
  }
}

.file-types-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  max-height: 200px;
  overflow-y: auto;

  @include scrollbars($size: 6px, $track: #f1f1f1, $thumb: #cbd5e0, $thumb-hover: #a0aec0);
}

.file-type-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 0.75rem;
  background: $color-surface;
  border-radius: $radius-lg;
  transition: transform $transition;
  animation: vr-slide-in-right 0.3s ease-out;

  &:hover {
    transform: translateX(4px);
  }

  .file-type-icon {
    font-size: 1.25rem;
    line-height: 1;
  }

  .file-type-ext {
    font-size: 0.9rem;
    font-weight: 600;
    color: $color-text;
    min-width: 60px;
  }

  .file-type-count {
    font-size: 0.85rem;
    color: $color-text-muted;
    margin-left: auto;
  }
}

// Status Messages
.error-message {
  @include status-banner(
    $bg: $bg-error-soft,
    $border-color: #fc8181,
    $text-color: $color-critical-accent,
    $border-left: false,
    $border-size: 1px,
    $radius: $radius-lg,
    $padding: 1rem,
    $layout: row,
    $gap: 0.75rem
  );
  animation: vr-shake 0.5s ease-in-out;

  .error-icon {
    font-size: 1.5rem;
    line-height: 1;
  }
}

.cancelled-message {
  @include status-banner(
    $bg: $bg-warning-soft,
    $border-color: $color-warning,
    $text-color: #e65100,
    $border-left: false,
    $border-size: 1px,
    $radius: $radius-lg,
    $padding: 1rem,
    $layout: row,
    $gap: 0.75rem
  );

  .cancelled-icon {
    font-size: 1.5rem;
    line-height: 1;
  }
}

.paused-message {
  @include status-banner(
    $bg: #e6fffa,
    $border-color: #38b2ac,
    $text-color: #234e52,
    $border-left: false,
    $border-size: 1px,
    $radius: $radius-lg,
    $padding: 1rem,
    $layout: row,
    $gap: 0.75rem
  );

  .paused-icon {
    font-size: 1.5rem;
    line-height: 1;
  }
}

// Footer
.analysis-footer {
  padding: 1.5rem;
  border-top: 1px solid $color-border;
  display: flex;
  justify-content: center;

  .analysis-actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    justify-content: center;
  }
}

// Action Buttons
.pause-btn,
.cancel-btn,
.close-modal-btn {
  @include button-base($padding: 0.75rem 2rem, $radius: $radius-lg);
  font-size: 1rem;
  font-weight: 600;
  color: $color-white;
}

.pause-btn {
  background: linear-gradient(135deg, $color-info 0%, $color-info-hover 100%);

  @include lift-hover($shadow: 0 4px 12px rgba(49, 130, 206, 0.3));

  &:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }
}

.cancel-btn {
  background: linear-gradient(135deg, $color-critical-accent 0%, $color-critical-accent-hover 100%);

  @include lift-hover($shadow: 0 4px 12px rgba(229, 62, 62, 0.3));
}

.close-modal-btn {
  background: $gradient-brand;

  @include lift-hover($shadow: 0 4px 12px rgba(102, 126, 234, 0.3));
}

// Responsive Design
@media (max-width: 600px) {
  .stats-grid {
    grid-template-columns: 1fr;
  }

  .analysis-header h2 {
    font-size: 1.25rem;
  }

  .stat-card .stat-value {
    font-size: 1.25rem;
  }

  .analysis-body {
    padding: 1.5rem;
  }
}
